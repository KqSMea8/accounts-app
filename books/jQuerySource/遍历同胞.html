<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../scripts/jquery.js" type="text/javascript"></script>
</head>
<body>
<button id="test1">jQuery遍历同胞</button>
<button id="test2">模拟遍历同胞</button>

<ul class="level-1">
    <li class="item-i">I</li>
    <li class="item-ii">II
        <ul class="level-2">
            <li class="item-a">A</li>
            <li class="item-b">B
                <ul class="level-3">
                    <li class="item-1">1</li>
                    <li class="item-2">2</li>
                    <li class="item-3">3</li>
                </ul>
            </li>
            <li class="item-c">C</li>
        </ul>
    </li>
    <li class="item-4">4</li>
    <li class="item-5">5</li>
    <li class="end">6</li>
    <li class="item-7">7</li>
    <li class="item-8">8</li>
</ul>



<script type="text/javascript">


    function dir(elem, dir, until) {
        var matched = [],
            truncate = until !== undefined;
        while ((elem = elem[dir]) && elem.nodeType !== 9) {
            if (elem.nodeType === 1) {
                if (truncate) {
                    if (elem.nodeName.toLowerCase() == until || elem.className == until) {
                        break;
                    }
                }
                matched.push(elem);
            }
        }
        return matched;
    }


    function nextAll(elem) {
        return dir(elem, "nextSibling");
    }

    function prevAll(elem) {
        return dir(elem, "previousSibling");
    }

    function nextUntil(elem, until) {
        return dir(elem, "nextSibling", until);
    }

    function prevUntil(elem, until) {
        return dir(elem, "previousSibling", until);
    }


    $("#test1").click(function(){
        var item = $('li.item-ii');
        //alert(item.nextAll()[0].className)
        //alert(item.prevAll()[0].className)
        console.log(item.nextUntil('.end'))
        console.log(item.nextUntil('.end')[0].className)
        //alert(item.prevUntil('.first')[0].className)
    })

    $("#test2").click(function(){
        var item = document.querySelectorAll('li.item-ii')[0];
        console.log(item.style);
        item.style.backgroundColor = 'blue';
        //alert(nextAll(item)[0].className)
        //alert(prevAll(item)[0].className)
        console.log(nextUntil(item, 'end'),0)
        console.log(nextUntil(item, 'end')[0].className,1)
        //alert(prevUntil(item, '.first')[0].className)
    })



</script>
</body>
</html>