<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="src/js/sea.js"></script>
    <script src="src/config.js"></script>
</head>
<body>
<h1>另一种helper用法</h1>
<p>
    小菜刚刚提到过，带options参数的Helper是块级别的，而不带的，相当于行内级别的Helper。<br>

    从例子一开始，性别就是用0、1代码表示的，但实际情况下我们需要转换成汉字，transformation这个Helper需要一个参数，根据不同的代码，返回男女，这样调用{{transformation sex}}，其中sex是从当前上下文中读取的性别代码。
</p>


<!--基础html框架-->
<table>
    <thead>
    <tr>
        <th>姓名</th>
        <th>性别</th>
        <th>年龄</th>
    </tr>
    </thead>
    <tbody id="tableList">

    </tbody>
</table>

<!--插件引用-->
<!--<script src="../src/js/jquery-1.11.2.js"></script>-->
<!--<script src="../src/js/handlebars-v4.0.5.js"></script>-->

<!--handlebars.js模板-->
<!--handlebars.js模板放在script标签中,保留了html原有的层次结构,模板中要写一些操作语句-->
<!--id可以用来唯一确定一个模板,type是模板固定的写法-->

<script id="table-template" type="text/x-handlebars-template">
    {{#each student}}
        {{#if name}}
            {{#compare age 20}}
                <tr>
                    <td>{{name}}</td>
                    <td>{{transformation sex}}</td>
                    <td>{{age}}</td>
                </tr>
            {{else}}
                <tr>
                    <td>?</td>
                    <td>?</td>
                    <td>?</td>
                </tr>
            {{/compare}}
        {{/if}}
    {{/each}}
</script>


<!--进行数据处理,html结构-->
<!--<script type="text/javascript">-->
    <!--$(document).ready(function () {-->
        <!--//模拟的json对象-->
        <!--var data = {-->
            <!--"student": [-->
                <!--{-->
                    <!--"name": "张三",-->
                    <!--"sex": "0",-->
                    <!--"age": 23-->
                <!--},-->
                <!--{-->
                    <!--"name": "李四",-->
                    <!--"sex": "0",-->
                    <!--"age": "18"-->
                <!--},-->
                <!--{-->
                    <!--"name": "妞妞",-->
                    <!--"sex": 1,-->
                    <!--"age": 21-->
                <!--}-->
            <!--]-->
        <!--};-->


        <!--//注册一个handlebars模板,通过id找到某一个模板,获取模板的html框架-->
        <!--var template=Handlebars.compile($("#table-template").html());-->

        <!--//注册一个比较大小的helper,判断v1是否大于v2-->
        <!--Handlebars.registerHelper("compare",function (v1, v2, options) {-->
            <!--if(v1>v2){-->
                <!--//满足添加继续执行-->
                <!--return options.fn(this);-->
            <!--}else{-->
                <!--//不满足条件执行{{else}}部分-->
                <!--return options.inverse(this);-->
            <!--}-->
        <!--});-->

        <!--//注册一个翻译用的helper,0翻译成男,1翻译成女-->
        <!--Handlebars.registerHelper("transformat",function (value) {-->
            <!--if(value==0){-->
                <!--return "男";-->
            <!--}else if(value==1){-->
                <!--return "女";-->
            <!--}-->
        <!--});-->

        <!--//将json对象用刚刚注册的handlebars模板封装,得到最终的html,插入到基础table中-->
        <!--$('#tableList').html(template(data));-->
    <!--})-->
<!--</script>-->
<script>seajs.use('bus/handlebars')</script>
</body>
</html>